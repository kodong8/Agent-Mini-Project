from langchain.prompts import PromptTemplate

REPORT_GENERATION_PROMPT = PromptTemplate(
    input_variables=["services_json", "criteria_items"],
    template="""
    당신은 AI 윤리 감사 전문가입니다. 주어진 AI 서비스 정보와 윤리 기준 평가 항목을 토대로 
    **AI 윤리성 리스크 진단 보고서**를 작성하십시오. 보고서에는 **요약 표**와 **항목별 서술형 권고안**이 
    포함되어야 합니다.

    - 대상 AI 서비스 (JSON, 최대 3개):
      {{ services_json }}

    - 선택된 윤리 기준 평가 항목 (항목명: 설명):
      {{ criteria_items_text }}

    보고서 형식:
    1. **요약 표**: 각 서비스별로 평가 항목에 대한 위험 수준(높음/중간/낮음)을 
    아래 형식의 마크다운 표로 정리합니다. 
    
    예:
    | 서비스  | 평가 항목   | 위험 수준 |
    | ---- | ------- | ----- |
    | 서비스A | 개인정보 보호 | 중간    |
    | 서비스A | 투명성     | 낮음    |
    | 서비스B | 편향성     | 높음    |
    | ...  | ...     | ...   |

    2. **권고안**: 각 평가 항목별로 별도의 소제목(예: `### 개인정보 보호`)을 만들고, 
    해당 항목에서 각 서비스가 준수하거나 개선해야 할 사항을 **서비스별**로 서술합니다. 
    
    예:
    개인정보 보호  
    서비스A: 사용자 데이터를 처리할 때 필요한 개인정보 최소수집 원칙을 적용하고, 데이터 암호화를 강화합니다.  
    서비스B: 개인정보 동의 절차를 명확히 문서화하고, 데이터 익명화 기법을 도입하여 개인식별정보 노출을 방지합니다.

    위 형식을 참고하여, 주어진 서비스들과 평가 항목에 대해 종합적인 진단 보고서를 작성하십시오. 
    출력은 Markdown 형식이어야 하며, 목차나 다른 부가 요소 없이 위의 구조에 맞추어 작성하십시오.

    보고서 작성 시, 다음을 유의하십시오:
    - 반드시 주어진 서비스들에 대해서만 진단을 진행하십시오.
    - 답변은 주어진 입력 정보에만 기반해야 하며, 명시적으로 주어지지 않은 정보를 추정하거나 생성하지 마십시오.
    - 불확실하거나 제공되지 않은 정보에 대해서는 ‘정보 없음’ 또는 ‘명확하지 않음’이라고 답하십시오.
    - 입력에 없는 정보에 대해 근거 없는 추론을 하지 마십시오.
    - 입력 내용이 불명확할 경우, 가능한 해석의 범위를 서술하거나, 판단할 수 없다고 명시하십시오.
    - 서비스별 차별화된 분석을 하십시오.
    - 평가 기준의 정의에 맞게 일관되게 적용하십시오.
    - 과장 없이 중립적이고 구체적인 권고안을 작성하십시오.
    - 추가적인 주석, 목차, 서론, 결론은 포함하지 마십시오.
    """
) 

